<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∂≠‡∑è‡∂ö‡∑ä‡∑Ç‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for Sinhala font and background */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            
            /* --- COPY PREVENTION (‡∂¥‡∑è‡∂® ‡∂¥‡∑í‡∂ß‡∂¥‡∂≠‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑Ä‡∑ê‡∑Ö‡∑ê‡∂ö‡∑ä‡∑Ä‡∑ì‡∂∏) --- */
            -webkit-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none; 
            user-select: none; 
        }
        .quiz-card {
            max-width: 600px;
            width: 100%;
            background-color: white;
            padding: 1.5rem; 
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        @media (max-width: 640px) {
            .quiz-card h1 {
                font-size: 1.5rem; 
            }
            .question-text {
                font-size: 1.125rem; 
            }
        }

        .option-button {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .option-button:hover:not(.disabled) {
            background-color: #e0f2f1; /* Light cyan on hover */
        }
        /* Specific colors for feedback */
        .correct-answer {
            background-color: #84cc16 !important; /* Lime 500 - Kolapata (Correct) */
            color: white !important;
            border-color: #65a30d !important;
        }
        .incorrect-answer {
            background-color: #ef4444 !important; /* Red 500 - Rathupata (Incorrect) */
            color: white !important;
            border-color: #dc2626 !important;
        }
        .disabled {
            pointer-events: none;
            opacity: 0.8;
        }
        /* Timer bar style */
        #timer-progress {
            transition: width 1s linear;
        }
        
        /* ------------------------------------------- */
        /* Modal Animation Styles (Popup Menu ‡∑É‡∂≥‡∑Ñ‡∑è) */
        /* ------------------------------------------- */
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .modal-enter-animation {
            /* Cubic-bezier provides a nice "smooth" acceleration/deceleration effect */
            animation: modalFadeIn 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

    </style>
</head>
<body>

<div class="quiz-card">
    <h1 class="text-3xl font-bold text-gray-800 mb-2 text-center">‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∂≠‡∑è‡∂ö‡∑ä‡∑Ç‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫</h1>
    <p class="text-center text-md text-blue-700 mb-6 font-semibold">GK ICT School ‡∑Ä‡∑í‡∂∑‡∑è‡∂ú ‡∂Ω‡∑í‡∂∫‡∂± ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∑Ä‡∑í‡∂Ø‡∑í‡∑Ñ.</p>

    <!-- 1. START SCREEN (‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä ‡∂Ø‡∑ê‡∂±‡∑ä Modal ‡∂ë‡∂ö‡∂ö‡∑ä ‡∑Ñ‡∂ª‡∑Ñ‡∑è ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂∫‡∑í) -->
    <div id="start-screen" class="text-center p-6 bg-blue-50 rounded-lg shadow-inner">
        <h2 class="text-2xl font-extrabold mb-6 text-blue-800">‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä‡∂Ø?</h2>
        
        <!-- UPDATED INSTRUCTION BUTTON (smaller size and less dominant color) -->
        <button onclick="showInstructions()" class="w-full bg-gray-200 text-gray-700 py-1.5 text-base rounded-lg hover:bg-gray-300 transition duration-300 mb-4 shadow-sm">
            "Start Quiz" ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂¥‡∑ô‡∂ª ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä ‡∂ö‡∑í‡∂∫‡∑Ä‡∂±‡∑ä‡∂±
        </button>
        
        <button onclick="startQuiz()" class="w-full bg-blue-600 text-white py-4 text-2xl rounded-lg hover:bg-blue-700 transition duration-300 shadow-xl transform hover:scale-105">
            Start Quiz
        </button>
    </div>

    <!-- 2. TIMER DISPLAY -->
    <div id="timer-display" class="mb-4 text-center hidden">
        <div id="timer-bar" class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
            <div id="timer-progress" class="h-2 bg-red-500 transition-all duration-1000 ease-linear" style="width: 100%;"></div>
        </div>
        <p class="mt-1 text-sm text-gray-600 font-medium"><span id="time-left">40</span> ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∑Ä ‡∂á‡∂≠ (Time Left)</p>
    </div>
    
    <!-- 3. QUIZ CONTAINER -->
    <div id="quiz-container" class="hidden">
        <!-- Question and options will be rendered here -->
    </div>
    
    <!-- 4. RESULTS CONTAINER -->
    <div id="results-container" class="hidden">
        <h2 class="text-2xl font-semibold text-center mb-4 text-gray-800">‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω</h2>
        <p id="final-score" class="text-xl font-bold text-center mb-6"></p>
        <button onclick="startQuiz()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300">
            ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂±‡∑ä‡∂± (Restart)
        </button>
    </div>
</div>

<!-- 5. INSTRUCTION MODAL (POPUP MENU) - Added ID for content -->
<div id="instruction-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center hidden">
    <div id="modal-content" class="bg-white rounded-xl shadow-2xl p-6 m-4 max-w-sm sm:max-w-md w-full max-h-[90vh] overflow-y-auto">
        <h3 class="text-2xl font-bold text-blue-700 mb-4 border-b pb-2">‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫‡∑ö ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä</h3>
        
        <ul class="text-left text-gray-700 space-y-3 list-disc list-inside mb-6 text-base">
            <li>‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ø‡∑í‡∂∫‡∂∫‡∑î‡∂≠‡∑î‡∂∫.</li>
            <li>‡∑É‡∑ë‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫‡∂ö‡∑ä ‡∑É‡∂≥‡∑Ñ‡∑è‡∂∏ ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ø‡∑ì‡∂∏‡∂ß ‡∂î‡∂∂‡∂ß ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª 40‡∂ö ‡∂ö‡∑è‡∂Ω‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑ö.</li>
            <li>‡∂±‡∑í‡∂∫‡∂∏‡∑í‡∂≠ ‡∂ö‡∑è‡∂Ω‡∂∫ ‡∂≠‡∑î‡∑Ö ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì‡∂∏‡∂ß ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑î‡∑Ä‡∑Ñ‡∑ú‡∂≠‡∑ä ‡∂ë‡∂∫ ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∂Ω‡∂ö‡∑î‡∂´‡∑î ‡∑Ä‡∂Ω‡∂ß ‡∂ë‡∂ö‡∂≠‡∑î ‡∑Ä‡∂±‡∑ä‡∂±‡∑ö ‡∂±‡∑ê‡∂≠.</li>
            <li>üëÆ ‡∂Ü‡∂ª‡∂ö‡∑ä‡∑Ç‡∂ö ‡∂±‡∑ì‡∂≠‡∑í (Security Rules):
                <ul class="list-disc list-inside ml-5 mt-1 space-y-1 text-sm text-red-600 font-medium">
                    <li>Text ‡∂¥‡∑í‡∂ß‡∂¥‡∂≠‡∑ä ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏ ‡∂Ö‡∑Ä‡∑Ñ‡∑í‡∂ª ‡∂ö‡∂ª ‡∂á‡∂≠.</li>
                    <li>‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä Tab ‡∂ë‡∂ö‡∂ö‡∂ß ‡∑Ñ‡∑ù Window ‡∂ë‡∂ö‡∂ö‡∂ß ‡∂∏‡∑è‡∂ª‡∑î ‡∑Ä‡∑î‡∑Ä‡∑Ñ‡∑ú‡∂≠‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂∏‡∑î‡∂Ω ‡∑É‡∑í‡∂ß‡∂∏ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∑Ä‡∑ö.</li>
                    <li>Developer Tools ‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∂ö‡∑ô‡∂ß‡∑í‡∂∏‡∂Ç ‡∂Ö‡∑Ä‡∑Ñ‡∑í‡∂ª ‡∂ö‡∂ª ‡∂á‡∂≠.</li>
                </ul>
            </li>
        </ul>
        
        <button onclick="hideInstructions()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-lg">
            ‡∂≠‡∑ö‡∂ª‡∑î‡∂∏‡∑ä ‡∂ú‡∂≠‡∑ä‡∂≠‡∑è (Got It)
        </button>
    </div>
</div>

<script>
    // ----------------------------------------------------------------------
    // [SECURITY ENHANCEMENTS - ‡∂Ü‡∂ª‡∂ö‡∑ä‡∑Ç‡∂ö ‡∑Ä‡∑ê‡∂©‡∑í ‡∂Ø‡∑í‡∂∫‡∑î‡∂´‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ä]
    // ----------------------------------------------------------------------

    // --- 2. F12, Ctrl/Cmd + Shortcuts PREVENTION (‡∂ö‡∑ô‡∂ß‡∑í‡∂∏‡∂Ç ‡∂Ö‡∑Ä‡∑Ñ‡∑í‡∂ª ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏) ---
    document.addEventListener('keydown', function (e) {
        // F12 key (e.key === 'F12' or e.keyCode === 123)
        if (e.key === 'F12' || e.keyCode === 123) {
            e.preventDefault();
        }
        
        // Ctrl+Shift+I, Ctrl+Shift+J (Windows/Linux) - Developer Tools
        if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) {
            e.preventDefault();
        }
        
        // Ctrl+U (Windows/Linux) - View Source
        if (e.ctrlKey && e.key === 'U') {
            e.preventDefault();
        }

        // Cmd+Option+I (Mac) - Developer Tools
        if (e.metaKey && e.altKey && e.key === 'I') {
            e.preventDefault();
        }
        
        // Cmd+Option+J (Mac) - Developer Tools
        if (e.metaKey && e.altKey && e.key === 'J') {
            e.preventDefault();
        }
    });

    // --- 3. RIGHT CLICK AND LONG PRESS PREVENTION (Right Click ‡∑É‡∑Ñ Long Press ‡∑Ä‡∑ê‡∑Ö‡∑ê‡∂ö‡∑ä‡∑Ä‡∑ì‡∂∏) ---
    document.addEventListener('contextmenu', function (e) {
        e.preventDefault();
    });
    
    // ----------------------------------------------------------------------
    // [QUIZ LOGIC - ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫‡∑ö ‡∂ö‡∑ö‡∂≠‡∂∫]
    // ----------------------------------------------------------------------
    
    // Constants for the quiz
    const TIME_LIMIT = 40; // Time in seconds for each question
    
    // Global variables
    let currentQuestionIndex = 0;
    let score = 0;
    let isQuestionLocked = false;
    let timeRemaining = TIME_LIMIT;
    let timerInterval;

    // DOM elements
    const startScreen = document.getElementById('start-screen');
    const quizContainer = document.getElementById('quiz-container');
    const resultsContainer = document.getElementById('results-container');
    const timerDisplay = document.getElementById('timer-display');
    const instructionModal = document.getElementById('instruction-modal'); // MODAL CONTAINER
    const modalContent = document.getElementById('modal-content'); // MODAL CONTENT DIV (for animation)

    // ----------------------------------------------------------------------
    // [MODAL FUNCTIONS - Popup Menu ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂ö‡∑è‡∂ª‡∑ì‡∂≠‡∑ä‡∑Ä‡∂∫]
    // ----------------------------------------------------------------------

    function showInstructions() {
        instructionModal.classList.remove('hidden');
        // Add animation class when showing the modal
        modalContent.classList.add('modal-enter-animation');
    }

    function hideInstructions() {
        // Remove animation class and hide the modal
        instructionModal.classList.add('hidden');
        modalContent.classList.remove('modal-enter-animation');
    }

    // ----------------------------------------------------------------------
    // [‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫‡∑ö ‡∂Ø‡∂≠‡∑ä‡∂≠ / QUIZ DATA SECTION]
    // ----------------------------------------------------------------------
    const quizData = [
        // Q1
        { question: "URL ‡∂∫‡∂±‡∑ä‡∂±‡∑ô‡∑Ñ‡∑í ‡∂Ø‡∑í‡∂ú‡∑î ‡∑É‡∑ä‡∑Ä‡∂ª‡∑ñ‡∂¥‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "Uniform Resource Locator.", distractors: ["Universal Record Linkage.", "Uniform Redirect Language."] },
        // Q2
        { question: "‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù ‡∑É‡∂∏‡∑ä‡∂∏‡∂±‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∂´ (video conferencing) ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂∏‡∑ò‡∂Ø‡∑î‡∂ö‡∑è‡∂Ç‡∂ú ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂ã‡∂Ø‡∑è‡∑Ñ‡∂ª‡∂´ ‡∂Ø‡∑ô‡∂ö‡∂ö‡∑ä ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.", correct: "Zoom, Skype, GoToMeeting, Webex.", distractors: ["Microsoft Word, Excel.", "Adobe Photoshop, Illustrator."] },
        // Q3
        { question: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω‡∂ö (e-mail) ‡∂Ω‡∑ê‡∂∂‡∑î‡∂´‡∑î ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∂ö‡∑ä ‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑î‡∂ß ‡∂∫‡∑ê‡∑Ä‡∑ì‡∂∏ ‡∑Ñ‡∑ê‡∂≥‡∑í‡∂±‡∑ä‡∑Ä‡∑ô‡∂±‡∑ä‡∂±‡∑ö ‡∂ö‡∑î‡∂∏‡∂± ‡∂±‡∂∏‡∂ö‡∑í‡∂±‡∑ä‡∂Ø?", correct: "Forward ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏.", distractors: ["Reply ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏.", "Cc ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏."] },
        // Q4
        { question: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω‡∂ö‡∑ä ‡∑É‡∂∏‡∂ü ‡∂ú‡∑ú‡∂±‡∑î (files) ‡∂∫‡∑ê‡∑Ä‡∑ì‡∂∏‡∑ö ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "Attach ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏.", distractors: ["Download ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏.", "Upload ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏."] },
        // Q5
        { question: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω‡∂ö 'To' ‡∂ö‡∑ä‡∑Ç‡∑ö‡∂≠‡∑ä‚Äç‡∂ª‡∂∫‡∑ö ‡∂∫‡∑ú‡∂Ø‡∂±‡∑î ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±‡∑ö ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∑ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±‡∑è‡∂ú‡∑ö ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ê‡∂Ω‡∑ä ‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫.", distractors: ["‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∑ö ‡∑É‡∑è‡∂ª‡∑è‡∂Ç‡∑Å‡∂∫.", "‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∑ö ‡∂¥‡∑í‡∂ß‡∂¥‡∂≠‡∂ö‡∑ä ‡∂∫‡∑Ä‡∂± ‡∂Ö‡∂∫‡∂ú‡∑ö ‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫."] },
        // Q6
        { question: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω‡∂ö 'Cc' ‡∂∫‡∂±‡∑ä‡∂±‡∑ô‡∑Ñ‡∑í ‡∂≠‡∑ö‡∂ª‡∑î‡∂∏ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "Carbon Copy, ‡∂ë‡∂±‡∂∏‡∑ä ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∑ö ‡∂¥‡∑í‡∂ß‡∂¥‡∂≠‡∂ö‡∑ä ‡∂∫‡∑Ä‡∂± ‡∂Ö‡∂±‡∑ô‡∂ö‡∑î‡∂≠‡∑ä ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±‡∂±‡∑ä.", distractors: ["Confidential Copy, ‡∂ë‡∂±‡∂∏‡∑ä ‡∂ª‡∑Ñ‡∑É‡∑ä ‡∂¥‡∑í‡∂ß‡∂¥‡∂≠‡∂ö‡∑ä.", "Communication Center."] },
        // Q7
        { question: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω‡∂ö 'Bcc' ‡∂∫‡∂±‡∑ä‡∂±‡∑ô‡∑Ñ‡∑í ‡∂≠‡∑ö‡∂ª‡∑î‡∂∏ ‡∑É‡∑Ñ ‡∂ë‡∑Ñ‡∑í ‡∑Ä‡∑í‡∑Å‡∑ö‡∑Ç‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "Blind Carbon Copy, ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∂∫‡∑ú‡∂Ø‡∂± ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±‡∂±‡∑ä‡∑Ä 'To' ‡∑Ñ‡∑ù 'Cc' ‡∑Ñ‡∑í ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ö‡∂±‡∑ô‡∂ö‡∑ä ‡∂Ö‡∂∫‡∂ß ‡∂±‡∑ú‡∂¥‡∑ô‡∂±‡∑ö.", distractors: ["Basic Copy, ‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±‡∂±‡∑ä‡∂ß ‡∂¥‡∑ô‡∂±‡∑ö.", "Business Communication Center."] },
        // Q8
        { question: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω‡∂ö 'Subject' ‡∂ö‡∑ä‡∑Ç‡∑ö‡∂≠‡∑ä‚Äç‡∂ª‡∂∫‡∑ö ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∑Ö ‡∂∫‡∑î‡∂≠‡∑ä‡∂≠‡∑ö ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫‡∑ö ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥ ‡∑É‡∑è‡∂ª‡∑è‡∂Ç‡∑Å‡∂∫‡∂ö‡∑ä.", distractors: ["‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±‡∑è‡∂ú‡∑ö ‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫.", "‡∂Ö‡∂Ø‡∑è‡∂Ω ‡∂ú‡∑ú‡∂±‡∑î (Attachments) ‡∑Ä‡∂Ω ‡∂±‡∂∏‡∑ä."] },
        // Q9
        { question: "www ‡∂∫‡∂±‡∑ä‡∂±‡∑ô‡∂±‡∑ä ‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±‡∑ö ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", correct: "‡∂Ω‡∑ù‡∂ö ‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∑ä‡∂≠ ‡∂¢‡∑è‡∂Ω‡∂∫ (world wide web).", distractors: ["‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∑è‡∂ª‡∑í‡∂ö ‡∑Ä‡∑ô‡∂∂‡∑ä ‡∂Ö‡∂©‡∑Ä‡∑í ‡∂¢‡∑è‡∂Ω‡∂∫ (World Wide Websites)", "‡∂¥‡∑î‡∑Ö‡∑î‡∂Ω‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å ‡∂¢‡∑è‡∂Ω‡∂∫ (Wide Area Network)"] },
        // Q10
        { question: "‡∂¥‡∑î‡∂Ø‡∑ä‡∂ú‡∂Ω‡∂∫‡∑ô‡∂ö‡∑î‡∂ß ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂¢‡∑è‡∂Ω‡∂∫ ‡∂î‡∑É‡∑ä‡∑É‡∑ö ‡∂Ö‡∂¥‡∑Ñ‡∑è‡∑É ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏, ‡∂≠‡∂ª‡∑ä‡∂¢‡∂±‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑Ñ‡∑ù ‡∂Ö‡∂¥‡∑Ñ‡∑É‡∑î‡∂≠‡∑è‡∑Ä‡∂∫‡∂ß ‡∂¥‡∂≠‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑Ñ‡∂≥‡∑î‡∂±‡∑ä‡∑Ä‡∂±‡∑ä‡∂±‡∑ö ‡∂ö‡∑ô‡∑É‡∑ö‡∂Ø?", correct: "‡∑É‡∂∫‡∑í‡∂∂‡∂ª‡∑ä ‡∑Ñ‡∑í‡∂ª‡∑í‡∑Ñ‡∑ê‡∂ª ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ (cyberbullying).", distractors: ["‡∑Ü‡∑í‡∑Ç‡∑í‡∂±‡∑ä (phishing).", "‡∑Ñ‡∑ê‡∂ö‡∑í‡∂±‡∑ä (hacking)."] },
    ];

    // Array Shuffle Function (Fisher-Yates) - ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∑É‡∑Ñ ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ö‡∑Ñ‡∂π‡∑î ‡∂Ω‡∑ô‡∑É ‡∂¥‡∑ô‡∑Ö‡∂ú‡∑ê‡∑É‡∑ä‡∑Ä‡∑ì‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Handles the quiz when the time for a question runs out
    function handleTimeout() {
        if (timerInterval) {
            clearInterval(timerInterval);
        }
        if (isQuestionLocked) return; 
        isQuestionLocked = true;

        const optionsList = document.getElementById('options-list');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextButton = document.getElementById('next-button');
        const currentQ = quizData[currentQuestionIndex];
        
        // Show the correct answer (color it green)
        if (optionsList) {
            Array.from(optionsList.children).forEach(button => {
                const answer = button.getAttribute('data-answer');
                if (answer === currentQ.correct) {
                    button.classList.add('correct-answer');
                } else {
                    button.classList.add('disabled', 'opacity-50');
                }
            });
        }
        
        // Show feedback message for timeout
        if (feedbackMessage) {
            feedbackMessage.textContent = '‡∂ö‡∑è‡∂Ω‡∂∫ ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä! ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∂ö‡∑ä ‡∂≠‡∑ö‡∂ª‡∑î‡∑Ä‡∑ö ‡∂±‡∑ê‡∂≠. (Time\'s up! No answer selected.)';
            feedbackMessage.classList.remove('hidden', 'text-lime-600');
            feedbackMessage.classList.add('text-red-500');
        }
        
        // Enable Next button
        if (nextButton) {
            nextButton.disabled = false;
            nextButton.classList.remove('bg-gray-400', 'disabled');
            nextButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
        }
    }

    // Starts the timer for the current question
    function startTimer() {
        // Clear any existing timer
        if (timerInterval) {
            clearInterval(timerInterval);
        }

        timeRemaining = TIME_LIMIT;
        const timeLeftElement = document.getElementById('time-left');
        const timerProgressElement = document.getElementById('timer-progress');

        // Update display immediately and set bar to 100%
        if (timeLeftElement) timeLeftElement.textContent = timeRemaining;
        if (timerProgressElement) {
            timerProgressElement.style.width = '100%';
            timerProgressElement.classList.remove('bg-red-700');
            timerProgressElement.classList.add('bg-red-500');
        }
        
        // Start countdown
        timerInterval = setInterval(() => {
            timeRemaining--;

            // Update time display
            if (timeLeftElement) timeLeftElement.textContent = timeRemaining;
            
            // Update progress bar
            const progress = (timeRemaining / TIME_LIMIT) * 100;
            if (timerProgressElement) timerProgressElement.style.width = `${progress}%`;

            // Change bar color when time is low
            if (timeRemaining <= 5 && timerProgressElement) {
                // Flash effect for low time (optional)
                timerProgressElement.classList.toggle('bg-red-700');
            }

            if (timeRemaining <= 0) {
                clearInterval(timerInterval);
                handleTimeout();
            }
        }, 1000);
    }

    // ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫ ‡∑É‡∑Ñ ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∑Ä‡∑í‡∂Ø‡∑ê‡∑Ñ‡∑î‡∂∏‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫
    function renderQuestion() {
        if (currentQuestionIndex >= quizData.length) {
            showResults();
            return;
        }

        isQuestionLocked = false;
        const currentQ = quizData[currentQuestionIndex];
        
        // ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∑É‡∑Ñ ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª ‡∂Ö‡∑Ñ‡∂π‡∑î ‡∂Ω‡∑ô‡∑É ‡∂¥‡∑ô‡∑Ö‡∂ú‡∑ê‡∑É‡∑ä‡∑Ä‡∑ì‡∂∏
        const options = shuffleArray([
            currentQ.correct, 
            ...currentQ.distractors.slice(0, 3) 
        ]);

        const questionNumber = currentQuestionIndex + 1;
        const totalQuestions = quizData.length;

        quizContainer.innerHTML = `
            <div class="mb-6">
                <p class="text-lg font-semibold text-blue-600 mb-2">‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫ ${questionNumber} / ${totalQuestions}</p>
                <h2 class="question-text text-xl font-bold text-gray-700">${currentQ.question}</h2>
            </div>
            <div id="options-list" class="space-y-3">
                ${options.map((option, index) => `
                    <button 
                        class="option-button w-full text-left p-4 border border-gray-300 rounded-lg text-gray-700 shadow-sm transition duration-150 ease-in-out bg-gray-50"
                        data-answer="${option}"
                        onclick="checkAnswer(this, '${currentQ.correct.replace(/'/g, "\\'")}')"
                    >
                        ${option}
                    </button>
                `).join('')}
            </div>
            <div id="feedback-message" class="mt-4 text-center text-sm font-medium hidden"></div>
            <button id="next-button" onclick="nextQuestion()" class="mt-6 w-full bg-gray-400 text-white py-3 rounded-lg disabled transition duration-300" disabled>
                ‡∂ä‡∑Ö‡∂ü ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫ (Next Question)
            </button>
        `;
        
        // Start the timer for the new question
        startTimer();
    }

    // ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∑è ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫
    function checkAnswer(selectedButton, correctAnswer) {
        if (isQuestionLocked) return;
        
        // Stop the timer immediately
        if (timerInterval) {
            clearInterval(timerInterval);
        }

        isQuestionLocked = true;

        const selectedAnswer = selectedButton.getAttribute('data-answer');
        const optionsList = document.getElementById('options-list').children;
        const feedbackMessage = document.getElementById('feedback-message');
        const nextButton = document.getElementById('next-button');
        let isCorrect = false;

        // ‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ ‡∂∂‡∑ú‡∂≠‡∑ä‡∂≠‡∂∏‡∑ä disable ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
        Array.from(optionsList).forEach(button => {
            button.classList.add('disabled');
        });
        
        // ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∑ô‡∂± ‡∑Ä‡∂ª‡∑ä‡∂´ ‡∂ú‡∑ê‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
        Array.from(optionsList).forEach(button => {
            const answer = button.getAttribute('data-answer');
            if (answer === correctAnswer) {
                button.classList.add('correct-answer');
                if (button === selectedButton) {
                    isCorrect = true;
                }
            }
        });

        if (isCorrect) {
            score++;
            selectedButton.classList.add('correct-answer'); // ‡∂ö‡∑ú‡∑Ö ‡∂¥‡∑è‡∂ß
            feedbackMessage.textContent = '‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! (Correct!)';
            feedbackMessage.classList.remove('text-red-500', 'hidden');
            feedbackMessage.classList.add('text-lime-600');
        } else {
            selectedButton.classList.add('incorrect-answer'); // ‡∂ª‡∂≠‡∑î ‡∂¥‡∑è‡∂ß
            feedbackMessage.textContent = '‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂ö‡∑ú‡∑Ö ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂∫‡∑ô‡∂±‡∑ä ‡∂Ø‡∂ö‡∑ä‡∑Ä‡∑è ‡∂á‡∂≠. (Incorrect!)';
            feedbackMessage.classList.remove('text-lime-600', 'hidden');
            feedbackMessage.classList.add('text-red-500');
        }

        // Next ‡∂∂‡∑ú‡∂≠‡∑ä‡∂≠‡∂∏ ‡∑É‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
        nextButton.disabled = false;
        nextButton.classList.remove('bg-gray-400', 'disabled');
        nextButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
    }

    // ‡∂ä‡∑Ö‡∂ü ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫‡∂ß ‡∂∫‡∑è‡∂∏‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫
    function nextQuestion() {
        currentQuestionIndex++;
        renderQuestion();
    }

    // ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫
    function showResults() {
        // Clear the timer when results are shown
        if (timerInterval) {
            clearInterval(timerInterval);
        }
        timerDisplay.classList.add('hidden'); // Hide timer on results page
        quizContainer.classList.add('hidden');
        resultsContainer.classList.remove('hidden');
        
        const finalScoreElement = document.getElementById('final-score');
        finalScoreElement.textContent = `‡∂î‡∂∂ ‡∂Ω‡∂∂‡∑è‡∂ú‡∂≠‡∑ä ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î: ${score} / ${quizData.length}`;
        finalScoreElement.classList.remove('text-red-500', 'text-orange-500', 'text-lime-600');

        // ‡∂Ω‡∂ö‡∑î‡∂´‡∑î ‡∂Ö‡∂±‡∑î‡∑Ä ‡∑Ä‡∂ª‡∑ä‡∂´‡∂∫ ‡∂≠‡∑ì‡∂ª‡∂´‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
        const percentage = (score / quizData.length) * 100;
        if (percentage >= 70) {
            finalScoreElement.classList.add('text-lime-600');
        } else if (percentage >= 40) {
            finalScoreElement.classList.add('text-orange-500');
        } else {
            finalScoreElement.classList.add('text-red-500');
        }
    }
    
    // --- Reset Quiz State and Show Start Screen ---
    function resetQuizState() {
        // Stop any running timer
        if (timerInterval) {
            clearInterval(timerInterval);
        }
        
        // Reset state variables
        currentQuestionIndex = 0;
        score = 0;
        isQuestionLocked = false;
        timeRemaining = TIME_LIMIT;

        // Show the Start Screen and hide quiz/results/timer
        startScreen.classList.remove('hidden');
        quizContainer.classList.add('hidden');
        resultsContainer.classList.add('hidden');
        timerDisplay.classList.add('hidden');
        
        // Ensure modal is also hidden and animation class removed
        instructionModal.classList.add('hidden');
        modalContent.classList.remove('modal-enter-animation');
    }

    // ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö/‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂∫
    function startQuiz() {
        // Reset the state and UI to ensure a clean start
        resetQuizState(); 

        // ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂¥‡∑ô‡∂ª ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂Ö‡∑Ñ‡∂π‡∑î ‡∂Ω‡∑ô‡∑É ‡∂¥‡∑ô‡∑Ö‡∂ú‡∑ê‡∑É‡∑ä‡∑Ä‡∑ì‡∂∏
        shuffleArray(quizData); 
        
        // Transition from Start Screen to Quiz Container
        startScreen.classList.add('hidden');
        quizContainer.classList.remove('hidden');
        timerDisplay.classList.remove('hidden');
        
        // Render the first question (Question 1)
        renderQuestion();
    }
    
    // --- 4. TAB CHANGE / WINDOW BLUR DETECTION (‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä Tab ‡∂ë‡∂ö‡∂ö‡∂ß ‡∂ú‡∑í‡∂∫‡∑Ñ‡∑ú‡∂≠‡∑ä Reset ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏) ---
    document.addEventListener("visibilitychange", function() {
        // When the document is hidden (user switched to another tab/window)
        if (document.hidden) {
            // Only reset if the start screen is hidden, meaning the quiz is currently running or showing results
            if (startScreen.classList.contains('hidden')) {
                 resetQuizState();
            }
        }
    });

</script>

</body>
</html>
